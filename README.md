# Avito-segments

Сервис представляет собой сервер, принимающий четыре вида запросов, призванных изменить данные в БД или достать их оттуда.

База данных содержит две таблицы. Segments хранит автоматически генерируемые segment_id и slug, то есть название соответствующего сегмента. Users хранит user_id и массив segments_ids, содержащий id сегментов, в которых пользователь находится на данный момент.

Поддерживаемые запросы:

1. /create_segment

   Post-запрос, добавляющий сегмент в таблицу Segments. Должен содержать тело в виде json’a
   {"slug”:”<имя сегмента>“}
   Возвращает response code 201 в случае успешного добавления.

2. /change_segments

   Post-запрос, добавляющий заданного пользователя в один или несколько сегментов, или удаляющий его из одного или нескольких сегментов. Должен содержать тело в виде json’a
   {"user":{"id”:<id пользователя>},”to_add":{"segments”:[<названия сегментов для добавления>]},”to_delete":{"segments":[<названия сегментов для удаления>]},"TTL":<время в секундах>}}
   Параметр TTL опционален, в случае его указания добавленные пользователю сегменты будут удалены отдельной горутиной через TTL секунд. 
   Возвращает response code 200 в случае успешного добавления/удаления.

3. /get_segments

   Post-запрос, возвращающий список названий сегментов, в которых состоит заданный пользователь. Должен содержать тело в виде json’a {"id":1000}.
   Если указанный пользователь существует, возвращает response code 200, в теле rensponse будет лежать json {“segments”:[<названия сегментов пользователя>]}

4. /delete_segment

   Post-запрос, удаляющий сегмент у всех пользователей, а также из таблицы Segments. Должен содержать тело в виде json’a
   {"slug”:”<имя сегмента>“}
   Возвращает response code 200 в случае успешного удаления.


